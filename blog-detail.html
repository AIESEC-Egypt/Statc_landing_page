<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-T4PJSH2');</script>
        <!-- End Google Tag Manager -->
        <meta charset="UTF-8">
        <title>Blog Detail | AIESEC in EGYPT</title>
        <meta name="description" content="AIESEC develops the next generation of young leaders with impactful professional and volunteering experiences to activate their leadership potential.">
        <meta name="keywords" content="volunteer, world, impact, creative, inspiration, youth">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta property="og:locale" content="en_US">
        <meta property="og:type" content="website">
        <meta property="og:title" content="AIESEC EGYPT">
        <meta property="og:description" content="AIESEC is the biggest youth run organization that aims to develop leadership potential through cross cultural exchange and practical experience.">
        <meta property="og:url" content="https://aiesec.org.eg/">
        <meta property="og:site_name" content="AIESEC in EGYPT">
        <meta property="article:publisher" content="https://www.facebook.com/aiesecegypt">
        <meta property="og:image" content="img/fb.jpg">
        
        <!-- Icons -->
            <link rel="apple-touch-icon-precomposed" href="img/icons/apple-touch-icon.png">
            <link rel="icon" href="img/logos/AIESEC-Favicon-309x341.png">
        
        <!-- Stylesheets -->
            <link rel="stylesheet" href="css/fontawesome.min.css">
        <!-- <link rel="stylesheet" href="css/main.min.css"> -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css?family=Heebo|Roboto&display=swap" rel="stylesheet">
    
        <!-- JavaScript -->
        <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
		<script src="https://use.fontawesome.com/7bcb44edef.js"></script>
    </head>
<body>
    <style>
        .do-not-display {
            display: none;
        }

        .img-div {
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 3px 5px 10px 5px rgba(44, 58, 70, 0.5);
            max-height: 500px;
            position: relative;
        }

        .img-div img#blog-cover-img {
            flex-shrink: 0;
            width: 100%;
            height: 100%;
        }

        .img-layover-text {
            position: absolute; 
            bottom: 10px;
            left: 20px;
        }
    </style>

    <div class="content-container do-not-display">
        <!-- Navbar Starts -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
            <div class="container">
                <a class="navbar-brand" href="#">
                    <img src="./img/logos/header-light.png" height="30" alt="" loading="lazy" class="pl-4">
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Link</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Dropdown
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="#">Action</a>
                            <a class="dropdown-item" href="#">Another action</a>
                                <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="#">Something else here</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
                    </li>
                </ul>
                <ul class="navbar-nav mr-0">
                    <li class="nav-item active user-details">
                    </li>
                    <li class="nav-item active login-status">
                    </li>
                </ul>
            </div>
        </nav>
        <!-- Navbar Ends -->

        <!-- Blog Detail Section Starts -->
        <div class="container">
            <br>
            <div class="img-container img-div">
                <img src="http://127.0.0.1:8000/media/blog-images/Vanshika-img.png" alt="Opportunity-Image" class="img-fluids" id="blog-cover-img">
                <div class="img-layover-text">
                    <small class="text-white" id="blog-date">
                        May 12, 2020
                    </small>
                    <h4 class="text-white" id="blog-title">
                        Lorem, ipsum dolor sit amet consectetur adipisicing elit.
                    </h4>
                </div>
            </div>
            <div class="container-fluid blog-content mt-5">
                <p class="text-justify" id="blog-content">
                    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Inventore velit nisi excepturi laborum ipsum ipsam placeat tenetur vel perspiciatis porro itaque, voluptas atque nobis impedit facilis dolores laudantium illo doloremque dolore possimus perferendis! Consequuntur adipisci commodi facere aliquam tempora delectus impedit. Eum quas architecto saepe! Necessitatibus quisquam illo commodi eligendi ab, obcaecati consequuntur qui sapiente quia rerum iure ad veniam quas sequi dicta laudantium est dolorum doloribus labore quo molestias. Explicabo cum facere quae illum architecto inventore perferendis est deserunt, labore, omnis nihil accusantium magni sed quia nobis aliquid dolore consequuntur quo ratione dignissimos suscipit. Iste, optio et qui enim aspernatur error possimus sequi exercitationem facere amet harum, reprehenderit corporis officia! Impedit vero explicabo sunt, nemo asperiores quam natus totam alias praesentium nobis corrupti sapiente unde a! Aut nesciunt voluptates deleniti optio voluptatum quo ducimus quas tenetur amet ipsum cum animi recusandae quam praesentium vitae, repudiandae similique enim reiciendis maxime odit quis in? Dolorem facere sed nam laudantium vel neque perferendis pariatur soluta iure saepe. Amet laboriosam repellat quos at porro? Similique ratione eaque error voluptates, mollitia nisi autem soluta quasi fugit, expedita tenetur non laudantium. Sit, est eligendi fugiat harum, eveniet porro esse voluptatum quae non accusamus velit. Quod sapiente porro possimus odit cumque eum fugiat suscipit, necessitatibus consectetur commodi neque in beatae fuga dolores dolorum incidunt expedita, et nostrum alias ex minus non ducimus at! Nesciunt consequuntur alias et eos illum labore quas sunt inventore iure repellendus maxime beatae reprehenderit quod, a possimus corporis magni laborum fuga ut odit. Quo blanditiis eaque quas? Sint beatae impedit animi commodi odio amet, neque explicabo ea enim, expedita repellendus et eum id? Delectus asperiores possimus molestias sunt nobis dolorem commodi consequatur recusandae, laborum veritatis placeat quas unde vero iste maiores voluptas perspiciatis? Harum dolores dolorum minima iste officia blanditiis repellat sunt!
                </p>
            </div>
        </div>
        <!-- Blog Detail Section Ends -->
    </div>

    <!-- Spinner Starts -->
    <div class="spinner-container mt-5">
        <div class="d-flex justify-content-center">
            <div class="spinner-border" role="status">
            <span class="sr-only">Loading...</span>
            </div>
        </div>
    </div>
    <!-- Spinner Ends -->

    <script>
        /* Spinner Action Starts */

        function start_spinner() {
            $('.spinner-container').removeClass('do-not-display');
            $('.content-container').addClass('do-not-display');
        }

        function stop_spinner() {
            $('.spinner-container').addClass('do-not-display');
            $('.content-container').removeClass('do-not-display');
        }
			
        /* Spinner Action Ends */

        function get_blog_pk() {
            var current_url = document.location.href;
            var params = current_url.split('?')[1].split('&');
            var data = {}, tmp;
            for (var i = 0, l = params.length; i < l; i++) {
                tmp = params[i].split('=');
                data[tmp[0]] = tmp[1];
            }
            if(data.id){
                return data.id;
            }
            else {
                /* RETURN 404 */
            }
        }

        function render_blog_details(data) {
            var month = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
            blog = data['data']['allBlogs']['edges'][0]['node'];
            
            var blog_date = blog.createdAt;
            blog_date = new Date(blog_date);
            blog_date = `${month[blog_date.getMonth()]} ${blog_date.getDate()}, ${blog_date.getFullYear()}`;
            blog.createdAt = blog_date;

            $('#blog-cover-img').attr('src',`http://127.0.0.1:8000/media/${blog.image}`);
            $('#blog-title').html(blog.title);
            $('#blog-content').html(blog.msg);
            $('#blog-date').html(blog.createdAt);
            stop_spinner();
        }

        function render_dummy_blog_details() {
            $('#blog-cover-img').attr('src',`http://127.0.0.1:8000/media/blog-images/Vanshika-img.png`);
            $('#blog-title').html("Coming Soon...");
            $('#blog-content').html("Stay tuned for an amazing blog right here");
            $('#blog-date').html("");
            stop_spinner();
        }

        function fetch_blog_details() {
            blog_pk = get_blog_pk();
            if (blog_pk == -1) {
                render_dummy_blog_details();
                return;
            }
            var username = "endpointauth";
            var mutation = "{externalLogin(username:\"" + username + "\"){token}}";

            var url_auth_raw = "https://alpha.aiesec.org.eg/graphql?query=mutation" + mutation;
            var url_auth_encoded = encodeURI(url_auth_raw);
            $.ajax({
                url: url_auth_encoded,
                type: 'post',
                success: function(data){
                    var token_auth = "JWT " + data["data"]["externalLogin"]["token"];
                    var query = `
                        query{
                            allBlogs(
                                pk : ${blog_pk}
                            ){
                                edges{
                                    node{
                                        pk
                                        title
                                        msg
                                        image
                                        createdAt
                                    }
                                }
                            }
                        }
                    `
                    var url_raw = 'http://127.0.0.1:8000/graphql?query=' + query;
                    var url_encoded = encodeURI(url_raw);
                    $.ajax({
                        url: url_encoded,
                        type: 'post',
                        headers: {
                            'Authorization': token_auth
                        },
                        success: (data) => {
                            render_blog_details(data);
                        },
                        async: true
                    })
                },
                async: true
            })
        }

        function main() {
            fetch_blog_details();
        }

        window.onload = main;
    </script>
</body>
</html>