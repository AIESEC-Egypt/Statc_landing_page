<!DOCTYPE html>
<html lang="en">
	<head>
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-T4PJSH2');</script>
        <!-- End Google Tag Manager -->

        <style>
          .ps-trigger-btn{
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 5;
          }
          .ps-container{
            position: fixed;
            bottom: 72px;
            right: 50px;
            max-height: 80%;
            display: none;
            background-color: #D0D0D0;
            border-radius: 10px;
            padding: 10px;
            z-index: 5;
          }
          .text-area{
          height: 50px;

          }
          .ps-form-error{
            display: none;
          }
          .text-danger{
              color: brown;
          }
      </style>

		<meta charset="UTF-8">
		<title>AIESEC in EGYPT</title>
		<meta name="description" content="AIESEC develops the next generation of young leaders with impactful professional and volunteering experiences to activate their leadership potential.">
		<meta name="keywords" content="volunteer, world, impact, creative, inspiration, youth">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta property="og:locale" content="en_US">
        <meta property="og:type" content="website">
        <meta property="og:title" content="AIESEC EGYPT">
        <meta property="og:description" content="AIESEC is the biggest youth run organization that aims to develop leadership potential through cross cultural exchange and practical experience.">
        <meta property="og:url" content="https://aiesec.org.eg/">
        <meta property="og:site_name" content="AIESEC in EGYPT">
        <meta property="article:publisher" content="https://www.facebook.com/aiesecegypt">
        <meta property="og:image" content="img/fb.jpg">
		<!-- Icons -->
		<link rel="apple-touch-icon-precomposed" href="img/icons/apple-touch-icon.png">
		<link rel="icon" href="img/logos/AIESEC-Favicon-309x341.png">
		<!-- Stylesheets -->
		<link rel="stylesheet" href="css/fontawesome.min.css">
		<link rel="stylesheet" href="css/main.min.css">
        <link href="https://fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet">
        <!-- Facebook Pixel Code -->
        <script>
          !function(f,b,e,v,n,t,s)
          {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
          n.callMethod.apply(n,arguments):n.queue.push(arguments)};
          if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
          n.queue=[];t=b.createElement(e);t.async=!0;
          t.src=v;s=b.getElementsByTagName(e)[0];
          s.parentNode.insertBefore(t,s)}(window, document,'script',
          'https://connect.facebook.net/en_US/fbevents.js');
          fbq('init', '448845196316606');
          fbq('track', 'PageView');
          </script>
          <noscript><img height="1" width="1" style="display:none"
          src="https://www.facebook.com/tr?id=448845196316606&ev=PageView&noscript=1"
          /></noscript>
            <!-- End Facebook Pixel Code -->
	</head>
	<body class="footer-dark">
        <!-- Google Tag Manager (noscript) -->
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T4PJSH2"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
        <!-- End Google Tag Manager (noscript) -->
		<!-- Header -->
		<header id="header" class="header-dynamic header-shadow-scroll">
			<div class="container">
				<a class="logo" href="index.html">
					<img src="img/logos/header-light.png" alt="" style="width: 231px; height: 33px;">
				</a>
				<nav>
					<ul class="nav-primary">
						<li>
							<a href="index.html">Home</a>
						</li>
						<li>
							<a href="#about">About</a>
						</li>
						<li>
							<a href="#products">Products</a>
						</li>
						<li>
							<a href="#testemonials">Testemonials</a>
						</li>
                        <li>
                             <a href="blog.html">Blog</a>
                        </li>

					</ul>

				</nav>
			</div>
		</header>
		<!-- Content -->
		<section id="content">
			<!-- Content Row -->
			<section id="products" class="content-row content-row-color content-row-clouds content-row-full-height">
				<div class="container">
					<header class="content-header content-header-large content-header-uppercase">
						<p style="font-size: 50px;">
							<mark style="font-family: 'Lato', sans-serif;">with</mark> <strong style="font-family: 'Lato', sans-serif;">aiesec.</strong>
						</p>
					</header>
					<div class="tab-group tab-group-switch-style">

							<div class="column-row align-center-bottom">

                                <div class="column-50">
                    <form id="ge_signup_form" action="javascript:validate_form();" class="form-full-width">
						<div class="column-row">
							<div class="column-50">
								<div class="form-row">
									<input id="first_name_field" type="text" name="name" placeholder="First Name">
								</div>
							</div>
							<div class="column-50">
								<div class="form-row">
									<input id="last_name_field" type="text" name="name" placeholder="Last Name">
								</div>
							</div>
						</div>
                        <div class="column-row" style="margin-top: 0px;">
                            <div class="column-50">
                                <div class="form-row">
									<input id="email_signup_field" type="text" name="name" placeholder="Email">
								</div>
                            </div>
                            <div class="column-50">
                                <div class="form-row">
									<input id="age" type="number" name="age" placeholder="Age">
								</div>
                            </div>
                        </div>
                        <div class="column-row" style="margin-top: 0px;">
                            <div class="column-50">
                                <div class="form-row">
									<input id="phone_field" type="text" name="name" placeholder="Phone">
								</div>
                            </div>
                            <div class="column-50">
                                <div class="form-row">
									<input id="dob_field" type="date" name="name" placeholder="Date of Birth">
								</div>
                            </div>
                        </div>
                        <div class="column-row" style="margin-top: 0px;">
                            <div class="column-50">
                                <div class="form-row">
									<select id="gender_options" placeholder="Gender" name="Gender">
                                        <option value="" disabled="" selected="">Gender</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                    </select>
								</div>
                            </div>
                            <div class="column-50">
                                <div class="form-row">
									<input id="City" type="text" name="name" placeholder="City">
								</div>
                            </div>
                        </div>
                        <div class="column-row" style="margin-top: 0px;">
                            <div class="column-50">
                                <div class="form-row">
									<select id="faculty_options" placeholder="Faculty" name="faculty">
                                        <option value="" disabled="" selected="">Faculty</option>
                                    </select>
								</div>
                            </div>
                            <div class="column-50">
                                <div class="form-row">
									<select id="campus_options" placeholder="Campus" name="campus">
                                        <option value="" disabled="" selected="">Campus</option>
                                    </select>
								</div>
                            </div>
                        </div>
                        <div class="column-row" style="margin-top: 0px;">
                            <div class="column-50">
                                <div class="form-row">
									<select id="How did you know about the recruitment?" placeholder="How did you know about the recruitment?" name="How did you know about the recruitment?">
                                        <option value="" disabled="" selected="">How did you know about the recruitment?</option>
                                        <option value="Friends or Parents">Friends or Parents</option>
                                        <option value="Facebook/Twitter">Facebook/Twitter</option>
                                        <option value="Instagram">Instagram</option>
                                        <option value="Linkedin">Linkedin</option>
                                        <option value="Email">Email</option>
                                        <option value="Booth on Campus">Booth on Campus</option>
                                        <option value="Other">Other</option>
                                    </select>
								</div>
                            </div>
                            <div class="column-50">
                                <div class="form-row">
									<select id="Would you be interested in going on exchange abroad IN THE FUTURE?" placeholder="interested" name="reason">
                                        <option value="" disabled="" selected="">Would you be interested in going on exchange abroad IN THE FUTURE?</option>
                                        <option value="Yes">Yes</option>
                                        <option value="No">No</option>
                                        <option value="Maybe">Maybe</option>
                                        <option value="I have already been on exchange">I have already been on exchange</option>
                                    </select>
								</div>
                            </div>
                        </div>
                        <div class="column-row" style="margin-top: 0px;">
                            <div class="column-50">
                                <div class="form-row">
									<select id="How many hours per week are you willing to devote to the organization?" placeholder="How many hours per week are you willing to devote to the organization?" name="How many hours per week are you willing to devote to the organization?">
                                        <option value="" disabled="" selected="">How many hours per week are you willing to devote to the organization?</option>
                                        <option value="0:5">From 0 to 5 hours per week</option>
                                        <option value="5:10">From 5 to 10 hours per week</option>
                                        <option value="10:15">From 10 to 15 hours per week</option>
                                        <option value="15:20">From 15 to 20 hours per week</option>
                                        <option value="More than 20 hours per week">More than 20 hours per week</option>
                                    </select>
								</div>
                            </div>
                            <div class="column-50">
                                <div class="form-row">
									<select id="Have you volunteered in anything before? (Student activity, events, charities, etc...)" placeholder="othervolunteering" name="othervolunteering">
                                        <option value="" disabled="" selected="">Have you volunteered in anything before? (Student activity, events, charities, etc...)</option>
                                        <option value="Yes">Yes, but currently I'm not part of it</option>
                                        <option value="No">Yes, and I'm currently part of it</option>
                                        <option value="Maybe">No</option>
                                    </select>
								</div>
                            </div>
                        </div>

                        <div class="column-row" style="margin-top: 0px;">
                            <div class="column-50">
                                <div class="form-row">
									<input id="Why you're joining AIESEC?" type="text" name="name" placeholder="Why you're joining AIESEC?" max="500">
								</div>
                            </div>
                            <div class="column-50">
                                <div class="form-row">
									<input id="What do you expect to develop inside the organization?" type="text" name="name" placeholder="What do you expect to develop inside the organization?">
								</div>
                            </div>
                        </div>

                        <div class="column-row" style="margin-top: 0px;">
                            <div class="column-50">
                                <div class="form-row">
									<select id="What's your English Level" placeholder="What's your English Level" name="What's your English Level">
                                        <option value="" disabled="" selected="">What's your English Level</option>
                                        <option value="Basic">Basic</option>
                                        <option value="Intermediate">Intermediate</option>
                                        <option value="Advanced">Advanced</option>
                                        <option value="Fluent">Fluent</option>
                                        </select>
								</div>
                            </div>
                            <div class="column-50">
                                <div class="form-row group">
                                    <span style="text-align: right;"><button id="signupbutton" class="button-secondary" style="text-align: right;" onclick="validate_form();">Confirm</button></span>
								</div>
                            </div>
                        </div>
					</form>
                    <div id="form_msg" style="display: none; border: 4px;">
                            <span id="sign_up_error_msg" style="color: red;"></span>
                          <div class="alert__close" onclick="document.getElementById('form_msg').style.display = 'none';">
                            Ã—
                          </div>
                        </div>
                    </div>
                                </div>

						</div>

					</div>
			</section>
			<!-- Content Row -->
			<section class="footer-secondary">
				<div class="container">
					<p style="text-align: center;">
						Copyright 2020 &copy; AIESEC in Egypt All rights reserved.<br>
						Powered by AIESEC, developed by <a href="https://www.facebook.com/dalegah">Omar Dalegah</a>
					</p>
				</div>
                <div class="container">
					<a id="hotme" data-modal-target="client-login"></a>

					<div class="column-row">


						<div class="column-25">

							<div id="client-login-modal" class="modal" data-modal="client-login" data-modal-dismissible="true">


							<div class="modal-header">
									<h3>
								        Login
									</h3>
								<i class="material-icons modal-dismiss">close</i></div><div id="modal_login_content" class="modal-content">
									<form class="form-full-width" action="javascript:login();">
                                        <p style="color: red; text-align: center;"><span id="login_error_msg"></span></p>
										<div class="form-row">
											<label for="form-email">Email Address</label>
											<input id="email_field" type="text" name="email">
										</div>
										<div class="form-row">
											<label for="form-password">Password</label>
											<input id="password_field" type="password" name="password">
										</div>
										<div class="form-row checkbox-style-block">
											<div class="checkbox-style active"><div class="checkbox-style-icon"><i class="fas fa-check"></i></div><input id="form-login" type="checkbox" name="login" checked=""></div>

										</div>
										<div class="form-row group">
											<button class="button-primary group-stretch">
												Login
											</button>

										</div>
									</form>
								</div></div>
						</div>

					</div>
        </div>
        <div class="column-row">
          <div class="page-content container-fluid ps-container column-flex">
              <div class="row">
                <div class="col-3">
                  <div class="content-body">
                      <form class="form-full-width">
                          <div class="form-row">
                              <label for="ps-name">Your Name<small class="text-danger">*</small></label>
                              <input id="ps-name" type="text" class="form-control">
                          </div>
                          <br>
                          <div class="form-group">
                              <label for="ps-email">Your Email<small class="text-danger">*</small></label>
                              <input id="ps-email" type="email" class="form-control">
                          </div>
                          <br>
                          <div class="form-group">
                              <label for="ps-category">Support Type<small class="text-danger">*</small></label>
                              <select id="ps-category" class="form-control">
                                  <option value="">------</option>
                              </select>
                          </div>
                          <br>
                          <div class="form-group">
                              <label for="ps-msg">Your message<small class="text-danger">*</small></label>
                              <textarea id="ps-msg" rows="3" class="form-control text-area" placeholder="Please explain what you need"></textarea>
                          </div>
                          <br>
                      </form>
                      <div class="ps-form-error">
                          <small class="text-danger ps-form-error">Kindly fill all the details!</small> <br>
                      </div>
                      <button id="submit" class="button-secondary ps-submit-btn">Submit</button>
                  </div>
                </div>
              </div>
          </div>
      </div>

        <button type="button" class="btn btn-raised btn-warning ps-trigger-btn">HELP</button>



      </section>


		<!-- Scripts -->
		<script src="js/jquery.min.js"></script>
		<script src="js/headroom.min.js"></script>
		<script src="js/js.cookie.min.js"></script>
		<script src="js/imagesloaded.min.js"></script>
		<script src="js/bricks.min.js"></script>
		<script src="js/main.min.js"></script>
        <script>
            var endpoint = "https://alpha.aiesec.org.eg"
            var campaign_id = null;
            function listCookies() {
            var theCookies = document.cookie.split(';');
            var aString = '';
            for (var i = 1 ; i <= theCookies.length; i++) {
                aString += i + ' ' + theCookies[i-1] + "\n";
            }
            return aString;
        }
            function getCookie(cname) {
              var name = cname + "=";
              var decodedCookie = decodeURIComponent(document.cookie);
              var ca = decodedCookie.split(';');
              for(var i = 0; i <ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') {
                  c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                  return c.substring(name.length, c.length);
                }
              }
              return "";
            }
            function setCookie(cname, cvalue, exdays) {
              var d = new Date();
              d.setTime(d.getTime() + (exdays*24*60*60*1000));
              var expires = "expires="+ d.toUTCString();
              document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
            }
              var windowObjectReference = null;
              var sensor = null;
            function show_user_data(data){
                document.getElementById('current_user').innerHTML = 'Hello, ' + data['data']['currentuser']['profile']['firstName'] + ', ' + '<a style="color: white;" href="#" onclick="logout();">Logout</a>';

                document.getElementById('signupbutton').setAttribute('disabled','disabled');

            }
            function get_current_user(access_token){
                var query = `query Myquery {
                     currentuser
                      {
                        id
                        profile
                        {
                          firstName
                        }
                      }
                    }`;

                    data_ = fetch(endpoint + '/graphql', {
                      method: 'POST',
                      headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json',
                        'Authorization': 'JWT ' + access_token,
                      },
                      body: JSON.stringify({
                        query,
                      })
                    })
                      .then(r => r.json())
                      .then(data => show_user_data(data));
            }
            function show_login_panel(){
                document.getElementById("hotme").click();
            }
            function validate_email(data){
                //console.log(data)
                result = data['data']['isEmailUnique']['unique']
                if (result == true){
                    //document.getElementById('signup_prog').innerHTML = '<div class="progress-horizontal__progress" style="width: 40%;"></div>';
                    //document.getElementById('prog_label').innerHTML = 'Creating Account';
                    //document.getElementById('div_prog').style.display = 'block';
                    signup_request()
                    //alert('SIGNING YOUR ASS UP!')
                }
                else{
                    var msg = "The email is registered before, please sign in.";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    //$("#ge_signup_form *").attr("disabled", "").off('click');
                    $('#ge_signup_form *').prop("disabled", false);
                }
            }
            function unique_email(email){
                //document.getElementById('ge_signup_form').style.display = 'none';
                $("#ge_signup_form *").attr("disabled", "disabled").off('click');
                var query = `mutation mymutation($email: String!){
                  isEmailUnique(email:$email){
                    unique
                  }
                }`;
                    var variables = { email: email},


                    data_ = fetch(endpoint + '/graphql', {
                      method: 'POST',
                      headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json',
                      },
                      body: JSON.stringify({
                        query,
                        variables,
                      })
                    })
                      .then(r => r.json())
                      .then(data => validate_email(data));

            }
            function isNumeric(n) {
              return !isNaN(parseFloat(n)) && isFinite(n);
            }
            function validate_form(){
                // Validate form inputs here first before calling !
                document.getElementById('form_msg').style.display = "none";
                var upperCase= new RegExp('[A-Z]');
                var lowerCase= new RegExp('[a-z]');
                var numbers = new RegExp('[0-9]');
                var firstname = document.getElementById('first_name_field').value;
                var lastname = document.getElementById('last_name_field').value;
                var email = document.getElementById('email_signup_field').value;
                var password = document.getElementById('age').value;
                var phone = document.getElementById('phone_field').value;
                var dob = document.getElementById('dob_field').value;
                var graduation_year = document.getElementById('graduation_year_field').value;
                var campus_options = document.getElementById('campus_options')
                var campus = campus_options.options[campus_options.selectedIndex].value;

                var faculty_options = document.getElementById('faculty_options')
                var faculty = faculty_options.options[faculty_options.selectedIndex].value;

                var gender_options = document.getElementById('gender_options')
                var gender = gender_options.options[gender_options.selectedIndex].value;
                if (firstname.length <= 0) {
                    var msg = "Please Enter Your First Name";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return ;
                 }
                if (lastname.length <= 0) {
                   var msg = "Please Enter Your Last Name";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return ;
                 }
                if (email.length < 4) {
                   var msg = "Please Enter a valid email.";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return ;
                 }
                if (email.includes(' ')){
                    var msg = "Please Remove Spaces from your email!";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return ;
                }
                if (!email.includes('@') || !email.includes('.')){
                    var msg = "Please enter a valid email!";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return ;
                }
                if (password.length <= 8) {
                   var msg = "Your password must be more than 8 characters";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return ;
                 }

                var numeric = false;
                var upperCase = false;
                var lowerCase = false;
                var i=0;
                var character='';
                var specials = ['"', '!', '"', '#', '$', '%', '&', '(', ')', '*', '+', ',', '-', '.', '/', ':', ';', '<', '=', '>', '?', '@', '[', "'\'", ']', '^', '_', '`', '{', '|', '}', '~' , '"']
                while (i < password.length){
                    character = password.charAt(i);
                    if (character != ' '){
                        if (isNumeric(character)){
                        numeric = true;
                        }
                        else{
                            if (!specials.includes(character)){
                                if (character == character.toUpperCase()) {
                                    upperCase = true;
                                }
                                if (character == character.toLowerCase()){
                                    lowerCase = true;
                                }
                            }
                        }
                    }

                    i++;
                }
                if ( !numeric || !upperCase || !lowerCase ){
                    var msg = "Your password must contain a mixture of upper and lower case letters and at least one number";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return ;
                }
                if (phone.length != 11) {
                    var msg = "Please enter a valid 11 digits phone number.";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return ;
                 }
                if (dob.length <= 6) {
                    var msg = "Please enter a valid date of birth.";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return ;
                 }
                if (calculate_age(new Date(document.getElementById('dob_field').value)) > 23 || calculate_age(new Date(document.getElementById('dob_field').value)) < 18 ){
                    var msg = "You need to be between the age of 18 and 23 to apply."
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return ;
                }
                if (graduation_year.length != 4) {
                    var msg = "Please enter a valid graduation year."
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return ;
                 }
                if (gender == ""){
                    var msg = "Please choose your Gender"
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return ;
                }
                unique_email(email);

            }
            function getUrlVars() {
                var vars = {};
                var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
                    vars[key] = value;
                });
                return vars;
            }
            function getUrlParam(parameter, defaultvalue){
                var urlparameter = defaultvalue;
                if(window.location.href.indexOf(parameter) > -1){
                    urlparameter = getUrlVars()[parameter];
                    }
                return urlparameter;
            }
            function calculate_age(dob) {
                var diff_ms = Date.now() - dob.getTime();
                var age_dt = new Date(diff_ms);

                return Math.abs(age_dt.getUTCFullYear() - 1970);
            }
            function main(){
                var campaign = getUrlParam("c", "");
                if(campaign == null){
                    window.location.href = '/index.html';
                }
                campaign_id = campaign;
                var current_token = getCookie('alpha_token');
                    if (current_token == ""){
                        //console.log('Adding Sign in Button');
                        var $log = $( "#current_user"),
                        str = '<button class="button-secondary" onclick="sign_in_btn();"> <i class="fas fa-lock icon-left"></i>Login </button> ',
                        html = $.parseHTML( str ),
                        nodeNames = [];
                        $log.append( html );

                    }
                    else{
                        get_current_user(current_token)
                    }
                fetch_campaign(campaign);
                fetch_faculties();
            }
            window.onload = main;
            $('.ps-trigger-btn').click(() => {
			var ps_container = $('.ps-container')
			if(ps_container.css('display') == 'block') {
			ps_container.css('display','none');
			} else {
			ps_container.css('display','block');
			if($('#ps-category')[0].options.length <= 1) {
				fetchRequestCategories();
			}
			}
		})
            function fetchRequestCategories() {
                var username = "endpointauth";
                var mutation = "{externalLogin(username:\"" + username + "\"){token}}";

                var url_auth_raw = "https://alpha.aiesec.org.eg/graphql?query=mutation" + mutation;
                var url_auth_encoded = encodeURI(url_auth_raw);
                $.ajax({
                url: url_auth_encoded,
                type: 'post',
                success: function(data){
                    var token_auth = "JWT " + data["data"]["externalLogin"]["token"];
                    var query = "{ allCustomerrequestcategories { edges { node { pk name }}}}";
                    var url_raw = 'https://alpha.aiesec.org.eg/graphql?query=' + query;
                    var url_encoded = encodeURI(url_raw);
                    $.ajax({
                    url: url_encoded,
                    type: 'post',
                    headers: {
                        'Authorization': token_auth
                    },
                    success: function(data){
                        var ps_category_list = data["data"]["allCustomerrequestcategories"]["edges"];
                        for(var i = 0; i < ps_category_list.length; i++) {
                        var new_option = new Option(ps_category_list[i]["node"]["name"], ps_category_list[i]["node"]["pk"]);
                        $(new_option).html(ps_category_list[i]["node"]["name"]);
                        $("#ps-category").append(new_option);
                        }
                    },
                    async: true
                    })
                },
                async: true
                })
            }
            $('.ps-submit-btn').click(() => {
                var name = $('#ps-name').val();
                var email = $('#ps-email').val();
                var category = $('#ps-category').val();
                var msg = $('#ps-msg').val();
                if( name && email && category && msg) {
                $('.ps-form-error').css('display', 'none');
                $('.ps-submit-btn').addClass('disabled');
                submitPlatformSupportRequest(name, email, category, msg);
                } else {
                $('.ps-submit-btn').removeClass('disabled');
                $('.ps-form-error').css('display', 'block');
                }
            });
            function submitPlatformSupportRequest(name, email, category, msg) {
                $('.ps-submit-btn').removeClass('disabled');
                $('.ps-submit-btn').attr("disabled", "disabled").on('click');

                var platform_index = 3;


                var username = "endpointauth";
                var mutation = "{externalLogin(username:\"" + username + "\"){token}}";

                var url_auth_raw = "https://alpha.aiesec.org.eg/graphql?query=mutation" + mutation;
                var url_auth_encoded = encodeURI(url_auth_raw);
                $.ajax({
                url: url_auth_encoded,
                type: 'post',
                success: function(data){
                    var token_auth = "JWT " + data["data"]["externalLogin"]["token"];
                    var query = "{ addCustomerRequest ( input: { name: \"" + name + "\" email: \"" + email + "\" msg: \"" + msg + "\" category: " + category + " platform: " + platform_index + " }){ myCustomerrequest { id }}}";
                    var url_raw = 'https://alpha.aiesec.org.eg/graphql?query=mutation' + query;
                    var url_encoded = encodeURI(url_raw);
                    $.ajax({
                    url: url_encoded,
                    type: 'post',
                    headers: {
                        'Authorization': token_auth
                    },
                    success: function(data){
                        var ps_response = data;


                        $('.ps-form-error').css('display', 'none');
                        $('#ps-name').val('');
                        $('#ps-email').val('');
                        $('#ps-category').val('');
                        $('#ps-msg').val('');
                        alert('Your request has been recorded. It would be resolved soon.')
                    },
                    async: true
                    })
                },
                async: true
                })
            }

        </script>

    </body>

</html>
