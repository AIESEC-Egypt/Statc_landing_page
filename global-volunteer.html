<!DOCTYPE html>
<html lang="en">
	<head>
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-T4PJSH2');</script>
        <!-- End Google Tag Manager -->
		<meta charset="UTF-8">
		<title>Global Volunteer | AIESEC in EGYPT</title>
		<meta name="description" content="AIESEC develops the next generation of young leaders with impactful professional and volunteering experiences to activate their leadership potential.">
		<meta name="keywords" content="volunteer, world, impact, creative, inspiration, youth">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta property="og:locale" content="en_US">
        <meta property="og:type" content="website">
        <meta property="og:title" content="AIESEC EGYPT">
        <meta property="og:description" content="AIESEC is the biggest youth run organization that aims to develop leadership potential through cross cultural exchange and practical experience.">
        <meta property="og:url" content="https://aiesec.org.eg/">
        <meta property="og:site_name" content="AIESEC in EGYPT">
        <meta property="article:publisher" content="https://www.facebook.com/aiesecegypt">
        <meta property="og:image" content="img/fb.jpg">
		<!-- Icons -->
		<link rel="apple-touch-icon-precomposed" href="img/icons/apple-touch-icon.png">
		<link rel="icon" href="img/logos/AIESEC-Favicon-309x341.png">
		<!-- Stylesheets -->
		<link rel="stylesheet" href="css/fontawesome.min.css">
		<link rel="stylesheet" href="css/main.min.css">
        <link href="https://fonts.googleapis.com/css?family=Heebo|Roboto&display=swap" rel="stylesheet">
	</head>
	<body class="footer-dark">
        <!-- Google Tag Manager (noscript) -->
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T4PJSH2"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
        <!-- End Google Tag Manager (noscript) -->
		<!-- Header -->
		<header id="header" class="header-dynamic header-shadow-scroll">
			<div class="container">
				<a class="logo" href="index.html">
					<img src="img/logos/header-light.png" alt="" style="width: 231px; height: 33px;">
				</a>
				<nav>
					<ul class="nav-primary">
						<li>
							<a href="index.html">Home</a>
						</li>
						<li>
							<a href="index.html#about">About</a>
						</li>
						<li>
							<a href="index.html#products">Products</a>
                            <ul>
                                <li>
                                    <a href="global-volunteer.html">Global Volunteer</a>
                                </li>
                                <li>
                                    <a href="global-teacher.html">Global Teacher</a>
                                </li>
                                <li>
                                    <a href="global-talent.html">Global Talent</a>
                                </li>
                            </ul>
						</li>
						<li>
							<a href="#testemonials">Testimonials</a>
						</li>
                        <li>
                             <a href="blog.html">Blog</a>
                        </li>
						<li>
							<strong><span id="current_user" style="color: white;"></span></strong>
						</li>
					</ul>
					
				</nav>
			</div>
		</header>
		<!-- Notification -->
		
		<!-- Content -->
		<section id="content">
			<!-- Content Row -->
			<section class="content-row content-row-color content-row-clouds content-row-full-height">
				<div class="container">
					<header class="content-header content-header-large content-header-uppercase" style="text-align: center;" >
						<img src="img/logos/gv_big_logo.png" style="width: 500px; height: 329px; margin-bottom: 0px;"/>
						
                        <p class="text-align-center" style="font-size: 14px; line-height: 20px; margin-top: 0px;">
                            <span>Volunteer abroad with <mark>AIESEC</mark></span><br/><br/>
								A Global Volunteer opportunity through AIESEC is an immersive experiences for youth who seek to develop themselves while directly contributing to the Sustainable Development Goals.<br /><br />
                                <a href="#apply" class="button"><span style="color: #F85A40;">Apply Now</span></a>
							</p>
                    </header>
                    
					
				</div>
				<div class="content-background content-background-light">
					<img src="uploads/banner-domain-search.jpg" alt="">
				</div>
			</section>
			<!-- Content Row -->
			
			<section id="apply" class="content-row content-row-border-top">
				<div class="container">
                    <header class="content-header">
						<h2>
							Choose Your Country
						</h2>
					</header>
					<div class="column-row">
						<div class="column-25">
							<h4>
								Recommended Countries
							</h4>
							<ul id="countries_list" class="list-style-nav">
								
							</ul>
						</div>
						<div class="column-75">
							<div class="network-map">
                                <ul id="countries_map">
                                    

                                </ul>
                                <img src="img/layout/map-dark.svg" alt="">
                            </div>
						</div>
					</div>
				</div>
			</section>
			
			<!-- Content Row -->
			<section id="testemonials" class="content-row content-row-gray">
				<div class="container">
					<header class="content-header">
						<h2>
							People who traveled with AIESEC
						</h2>
						
					</header>
					<div class="container">
					<div class="column-row align-center">
						<div class="column-50">
							<div class="gallery gallery-slider">
								<ul>
									<li>
										<a href="img/logos/testemonials/gv/1.png"><img src="img/logos/testemonials/gv/1.png" alt=""></a>
									</li>
									<li>
										<a href="img/logos/testemonials/gv/2.png"><img src="img/logos/testemonials/gv/2.png" alt=""></a>
									</li>
									<li>
										<a href="img/logos/testemonials/gv/3.png"><img src="img/logos/testemonials/gv/3.png" alt=""></a>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				</div>
			</section>
			<!-- Content Row -->
			
		</section>
		<!-- Footer -->
		<footer id="footer">
			<section class="footer-primary">
				<div class="container">
					<div class="column-row">
						<div class="column-33">
							<h5>
								AIESEC
							</h5>
							<p>
								AIESEC is a non-governmental not-for-profit organisation in consultative status with the United Nations Economic and Social Council (ECOSOC), affiliated with the UN DPI, member of ICMYO, and is recognized by UNESCO. AIESEC International is registered as a Foundation (Stichting), RSIN #807103895 in Rotterdam, The Netherlands.
							</p>
						</div>
						<div class="column-66">
							<div class="column-row align-right-top">
								<div class="column-25">
									<h5>
										CONNECT
									</h5>
									<ul class="list-style-icon">
										<li>
											<a href="https://www.facebook.com/aiesecegypt/"><i class="fab fa-facebook"></i>Facebook</a>
										</li>
										<li>
											<a href="https://www.instagram.com/aiesecegypt/"><i class="fab fa-instagram"></i>Instagram</a>
										</li>
										<li>
											<a href="https://www.youtube.com/channel/UCACQRlsLoDi1xY2gpxenkhA"><i class="fab fa-youtube"></i>Youtube</a>
										</li>
									</ul>
								</div>
								<div class="column-25">
									<h5>
										YOUTH OPPORTUNITIES 
									</h5>
									<ul>
										<li>
											<a href="global-volunteer.html">Global Volunteer</a>
										</li>
										<li>
											<a href="global-teacher.html">Global Teacher</a>
										</li>
										<li>
											<a href="global-talent.html">Global Talent</a>
										</li>
									</ul>
								</div>
								
								<div class="column-25">
                                </div>
							</div>
						</div>
					</div>
				</div>
			</section>
			<section class="footer-secondary">
				<div class="container">
					<p>
						Copyright 2020 &copy; AIESEC in Egypt All rights reserved.<br>
						Powered by AIESEC, developed by <a href="https://www.facebook.com/dalegah">Omar Dalegah</a>
					</p>
				</div>
                <div class="container">
					<a id="hotme" data-modal-target="client-login"></a>
                    <a id="coldme" data-modal-dismiss="gv-signup-modal">Cancel</a>
                    <a id="sign_me_up" data-modal-target="gv-signup-modal"></a>
                    <a id="country_link" data-modal-target="cloud-features"></a>
                    <a id="opp_details_link" data-modal-target="opp-features"></a>
					<div class="column-row">
						
						
						<div class="column-25">
							
							<div id="client-login-modal" class="modal" data-modal="client-login" data-modal-dismissible="true">
								
								
							<div class="modal-header">
									<h3>
								        Login
									</h3>
								<i class="material-icons modal-dismiss">close</i></div><div id="modal_login_content" class="modal-content">
									<form class="form-full-width" action="javascript:login();">
                                        <p style="color: red; text-align: center;"><span id="login_error_msg"></span></p>
										<div class="form-row">
											<label for="form-email">Email Address</label>
											<input id="email_field" type="text" name="email">
										</div>
										<div class="form-row">
											<label for="form-password">Password</label>
											<input id="password_field" type="password" name="password">
										</div>
										<div class="form-row checkbox-style-block">
											<div class="checkbox-style active"><div class="checkbox-style-icon"><i class="fas fa-check"></i></div><input id="form-login" type="checkbox" name="login" checked=""></div>
											
										</div>
										<div class="form-row group">
											<button class="button-primary group-stretch">
												Login
											</button>
											
										</div>
									</form>
								</div></div>
						</div>
                        
                       <div class="modal modal-large" data-modal="cloud-features" data-modal-dismissible="true">
                           
								<div class="modal-header" style="background-color: #F85A40;color: white;">
									
                                    
                                     <p style="float: left;"><img id="country_flag" style="height: 45px; width: 45px;" alt="Image" src=""></p><h3 style="text-align: center;"><span id="country_name" style="margin-left: 10px; font-family: 'Heebo', sans-serif;"></span></h3>
                                    
                                    
								</div>
								<div class="modal-content">
									<div class="column-row">
                                        
                                        <div class="column-40">
                                            <div class="column-row" style="text-align: center;">
                                               <pre style="border: 0px;width:0px;" ></pre>
                                                
                                                <pre style="color: #F85A40;text-align: center;font-family: 'Roboto', sans-serif; "><img style="width: 35px; height: 35px; align-content: center; margin-right: 0px; margin-left: 0px; margin-top: 0px;" src="img/logos/ac.png"/><br />Contract<br />Fees <br/><br/>  <span id="additional_costs">2400</span>LE</pre>
                                                
                                                <pre style="color: #F85A40;text-align: center; font-family: 'Roboto', sans-serif;"><img style="width: 35px; height: 35px; align-content: center; margin-right: 0px; margin-left: 0px; margin-top: 0px;" src="img/logos/fc.png"/><br />Average <br/>Flight <br /> Ticket<br/>  <span id="flight_costs"></span>LE</pre>
                                                
                                                <pre style="color: #F85A40;text-align: center; font-family: 'Roboto', sans-serif;"><img style="width: 35px; height: 35px; align-content: center; margin-right: 0px; margin-left: 0px; margin-top: 0px;" src="img/logos/lc.png"/><br />Average <br />Personal <br/> Spending<br/>  <span id="basic_costs"></span>LE</pre>
                                                
                                                
                                                <pre style="color: #F85A40;text-align: center; font-family: 'Roboto', sans-serif;"><img style="width: 35px; height: 35px; align-content: center; margin-right: 0px; margin-left: 0px; margin-top: 0px;" src="img/logos/visa.png"/><br />Visa <br/>Permit <br /> cost<br/>  <span id="visa_costs"></span>LE</pre>
                                                
                                                
                                                
                                                
                                                
                                            </div>
                                            
                                            
                                            
                                            <div class="column-row">
                                                
                                            <img id="country_poster" src="" />
                                                
                                            </div>
											
										</div>
                                        <span id="opp_model_msg" style="margin-top: 3px;margin-bottom: 0px; text-align: right;display: none;"></span>
										<div id="opps_container" class="column-60" style="overflow-y: scroll; height: 450px;">

										</div>
										
									</div>
								</div>
							</div>
							
							<div class="modal modal-large" data-modal="gv-signup-modal" data-modal-dismissible="true">
								<div class="modal-header" style="background-color: #F85A40;color: white;">
                                    <p style="text-align: center;"><span style="margin-left: 10px;">Sign Up to Apply!</span></p>
                                    
								</div>
								<div class="modal-content">
									<div class="column-row">
                                        <div class="column-33" style="background-image: url(img/logos/country_posters/gv_poster_signup.jpg);background-size: cover; height: 500px;">
											
										</div>
										<div class="column-66">
											<section class="content-row">
				
					<form id="ge_signup_form" action="javascript:validate_form();" class="form-full-width">
						<div class="column-row">
							<div class="column-50">
								<div class="form-row">
									<input id="first_name_field" type="text" name="name" placeholder="First Name">
								</div>
							</div>
							<div class="column-50">
								<div class="form-row">
									<input id="last_name_field" type="text" name="name" placeholder="Last Name">
								</div>
							</div>
						</div>
                        <div class="column-row" style="margin-top: 0px;">
                            <div class="column-50">
                                <div class="form-row">
									<input id="email_signup_field" type="text" name="name" placeholder="Email">
								</div>
                            </div>
                            <div class="column-50">
                                <div class="form-row">
									<input id="password_signup_field" type="password" name="password" placeholder="Password">
								</div>
                            </div>
                        </div>
                        <div class="column-row" style="margin-top: 0px;">
                            <div class="column-50">
                                <div class="form-row">
									<input id="phone_field" type="text" name="name" placeholder="Phone">
								</div>
                            </div>
                            <div class="column-50">
                                <div class="form-row">
									<input id="dob_field" type="text" onfocus="(this.type='date')" name="name" placeholder="Date of Birth">
								</div>
                            </div>
                        </div>
                        <div class="column-row" style="margin-top: 0px;">
                            <div class="column-50">
                                <div class="form-row">
									<select id="gender_options" placeholder="Gender" name="Gender">
                                        <option value="" disabled="" selected="">Gender</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>

                                    </select>
								</div>
                            </div>
                            <div class="column-50">
                                <div class="form-row">
									<input id="graduation_year_field" type="number" name="name" placeholder="Graduation Year">
								</div>
                            </div>
                        </div>
                        <div class="column-row" style="margin-top: 0px;">
                            <div class="column-50">
                                <div class="form-row">
									<select id="faculty_options" placeholder="Faculty" name="faculty">
                                        <option value="" disabled="" selected="">Faculty</option>
                                    </select>
								</div>
                            </div>
                            <div class="column-50">
                                <div class="form-row">
									<select id="campus_options" placeholder="Campus" name="campus">
                                        <option value="" disabled="" selected="">Campus</option>
                                    </select>
								</div>
                            </div>
                        </div>
                        <div class="column-row" style="margin-top: 0px;">
                            <div class="column-50">
                                <div class="form-row">
									<select id="referral_options" placeholder="Referral" name="referral">
                                        <option value="" disabled="" selected="">Referral</option>
                                    </select>
								</div>
                            </div>
                            <div class="column-50">
                                <div class="form-row">
									<select id="apply_reasons_options" placeholder="Campus" name="reason">
                                        <option value="" disabled="" selected="">Top reason for you to apply</option>
                                        <option value="Want to Volunteer/Intern abroad">Want to Volunteer/Intern abroad</option>
                                        <option value="Want to develop my leadership">Want to develop my leadership</option>
                                        <option value="Want to meet new people and cultures">Want to meet new people and cultures</option>
                                        <option value="Other">Other</option>
                                    </select>
								</div>
                            </div>
                        </div>
                        <div class="column-row" style="margin-top: 0px;">
                            <div class="column-50">
                                <div class="form-row">
									<select id="prevent_reasons_options" placeholder="top reason that might prevent you from going on exchange" name="referral">
                                        <option value="" disabled="" selected="">Top reason that might prevent you from going on exchange</option>
                                        <option value="Parent Issues">Parent Issues</option>
                                        <option value="Too Expensive">Too Expensive</option>
                                        <option value="Can not See any benefit from going on exchange">Can not See any benefit from going on exchange</option>
                                        <option value="I am not certain about AIESEC">I am not certain about AIESEC</option>
                                    </select>
								</div>
                            </div>
                            <div class="column-50">
                                <div class="form-row group">
                                    <span style="text-align: right;"><button id="signupbutton" class="button-secondary" style="text-align: right;" onclick="validate_form();">Confirm</button></span>
								</div>
                            </div>
                        </div>
					</form>
                                                <div id="form_msg" style="display: none; border: 4px;">
                            <span id="sign_up_error_msg" style="color: red;"></span>
                          <div class="alert__close" onclick="document.getElementById('form_msg').style.display = 'none';">
                            Ã—
                          </div>
                        </div>
				
			</section>
                                            
                                            
                                            
                                            
										</div>
										
									</div>
								</div>
							</div>
						
						<div class="modal modal-large" data-modal="opp-features" data-modal-dismissible="true">
                           
								<div id="opp_main_cover" class="modal-header">
                                    <h2 style="text-align: left; color: white;"><a id="back_btn" ><i class="fas fa-chevron-left icon-feature-medium text-color-light"></i></a></h2>
                                    <p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
                                               
                            <h2 style="margin-bottom: 0px;color: white;text-align: center;"><b><span id="opp_title"></span></b></h2>
                            <h4 style="margin-top: 0px;color: white;text-align: center;"><b><span id="opp_location"></span></b></h4>
                            <p style="text-align: center;"><span id="apply_button" style="text-align: center;"></span></p>
                                       <p>&nbsp;</p>
                                    <p>&nbsp;</p>
								</div>
								<div class="modal-content">
                                    <div class="tab-group">
                                      
                                        <div class="tab-item" data-title="Overview">
                                        <table>
                                          <thead>

                                          </thead>
                                          <tbody>
                                            <tr>
                                              <th scope="row"><strong>Title</strong></th>
                                              <td><span id="opp_title_details"></span></td>
                                            </tr>
                                            <tr>
                                         
                                              <th scope="row"><strong>Availability</strong></th>
                                              <td><select id="opp_ava" name="type"  placeholder="Choose a start date">
                                                <option value="" disabled="" selected="" >Choose a start date </option>
                                                <span id="opp_ava"></span>
                                              </select>
                                                    <div id="slot_msg" style="display: none; border: 4px;">
                                                      <span id="slot_error_msg" style="color: red;"></span>
                                                      <div class="alert__close" onclick="document.getElementById('slot_msg').style.display = 'none';">
                                                          </div>
                                                      </div>
                                            </td>
                                            </tr
                                               <tr>
                                              <th scope="row"><strong>Duartion</strong></th>
                                                   <td><span id="opp_duration"></span></td>
                                            </tr>
                                               <tr>
                                              <th scope="row"><strong>Project Fees</strong></th>
                                              <td><span id="opp_tnfees"></span></td>
                                            </tr>
                                              
                                          </tbody>
                                        </table>
                                        </div>
                                        <div class="tab-item" data-title="Role">
                                            <h4><strong>Role description</strong></h4>
                                            <span style="color: black;" id="role_descr"></span>
                                            
                                            <br />
                                            <br />
                                            <h4><strong>Main Activities</strong></h4>
                                            <ul style="color: black;" id="main_activities" style="list-style-type:disc;">
                                            </ul>
                                        </div>
                                        <div class="tab-item" data-title="Requirements">
                                            <table>
                                          <thead>

                                          </thead>
                                          <tbody>
                                            <tr>
                                              <th scope="row">Backgrounds</th>
                                              <td><span id="opp_backgrounds"></span></td>
                                            </tr>
                                            <tr>
                                              <th scope="row">Skills</th>
                                              <td><span id="opp_skills"></span></td>
                                            </tr>
                                            <tr>
                                              <th scope="row">Citizenships</th>
                                              <td><span id="opp_citizenships"></span></td>
                                            </tr>
                                               <tr>
                                              <th scope="row">Languages</th>
                                                   <td><span id="opp_languages"></span></td>
                                            </tr>
                                               <tr>
                                              <th scope="row">Study Levels</th>
                                              <td><span id="opp_study_levels"></span></td>
                                            </tr>
                                              
                                          </tbody>
                                        </table>
                                        </div>
                                        <div class="tab-item" data-title="Logistics">
                                            <table>
                                          <thead>

                                          </thead>
                                          <tbody>
                                            <tr>
                                              <th scope="row">Working Hours</th>
                                              <td><span id="opp_working_hours"></span></td>
                                            </tr>
                                            <tr>
                                              <th scope="row">Computer Provided</th>
                                              <td><span id="opp_computer_provided"></span></td>
                                            </tr>
                                            <tr>
                                              <th scope="row">Accomodation Provided</th>
                                              <td><span id="opp_accom_provided"></span></td>
                                            </tr>
                                               <tr>
                                              <th scope="row">Accomodation Covered</th>
                                                   <td><span id="opp_accom_covered"></span> </td>
                                            </tr>
                                               <tr>
                                              <th scope="row">Food Covered</th>
                                                   <td><span id="opp_food_covered"></span> </td>
                                            </tr>
                                              
                                          </tbody>
                                        </table>
                                        </div>
                                        <div class="tab-item" data-title="Visa">
                                                <table>
                                                  <thead>

                                                  </thead>
                                                  <tbody>
                                                    <tr>
                                                      <th scope="row">Visa Type</th>
                                                      <td><span id="opp_visa_type"></span></td>
                                                    </tr>
                                                    
                                                    <tr>
                                                      <th scope="row">Visa Link</th>
                                                      <td><span id="opp_visa_link"></span></td>
                                                    </tr>
                                                       <tr>
                                                      <th scope="row">Health Insurance</th>
                                                           <td><span id="opp_health_insurance"></span> </td>
                                                    </tr>


                                                  </tbody>
                                            </table>
                                        </div>
                                    </div>
								</div>
							</div>
					</div>
				</div>
			</section>
		</footer>
		<!-- Scripts -->
		<script src="js/jquery.min.js"></script>
		<script src="js/headroom.min.js"></script>
		<script src="js/js.cookie.min.js"></script>
		<script src="js/imagesloaded.min.js"></script>
		<script src="js/bricks.min.js"></script>
		<script src="js/main.min.js"></script>
        <script>
        function roll(){
            var close_menu_x = document.getElementById('nav-overlay-close')
            var slider_element = document.getElementsByClassName('gallery-next material-icons')[0];
            slider_element.click();
        }
        window.setInterval(function(){
          roll();
        }, 4000);
        </script>
        <script>
            var preferred_country = null;
            var preferred_country_id = null;
            var preferred_opp = null;
            var preferred_slot = null;
            var global_person_id = null;
            var page_index = 1;
            var opps_list = [];
            var endpoint = "https://alpha.aiesec.org.eg"
            function listCookies() {
            var theCookies = document.cookie.split(';');
            var aString = '';
            for (var i = 1 ; i <= theCookies.length; i++) {
                aString += i + ' ' + theCookies[i-1] + "\n";
            }
            return aString;
        }
            
            function getCookie(cname) {
              var name = cname + "=";
              var decodedCookie = decodeURIComponent(document.cookie);
              var ca = decodedCookie.split(';');
              for(var i = 0; i <ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') {
                  c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                  return c.substring(name.length, c.length);
                }
              }
              return "";
            }

            function setCookie(cname, cvalue, exdays) {
              var d = new Date();
              d.setTime(d.getTime() + (exdays*24*60*60*1000));
              var expires = "expires="+ d.toUTCString();
              document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
            }  
    
            function validate_login(data){
                //console.log(data);
                if (data['data']['expaLogin'] != null)
                {
                    setCookie("alpha_token", data['data']['expaLogin']['token'], 1);
                    location.reload();
                }
                else
                {
                    $('#modal_login_content *').prop("disabled", false);
                    document.getElementById('login_error_msg').innerHTML = "Wrong Username or Password!"
                }
            }

            function logout(){
                document.cookie = "alpha_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
                location.reload();
            }

           function login(user_code) {
              console.log(user_code);
              var query = `mutation Mymutation($codeToken: String!) {

                      expaLogin(codeToken:$codeToken, type:"OGX")
                      {
						            user
                        {
                          profile
                          {
                            firstName
                          }
                        }
                        token
                      }
                    }`;

              var variables = { codeToken: user_code.toString() },

                data_ = fetch(endpoint + '/graphql', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                  },
                  body: JSON.stringify({
                    query,
                    variables,
                  })
                })
                  .then(r => r.json())
                  .then(data => validate_login(data));
            }
            function check_auth() {
              //console.log(windowObjectReference.location.href);
              if (windowObjectReference.location.href.indexOf("code=") > -1) {
                console.log(windowObjectReference.location.href)
                var auth_code = windowObjectReference.location.href.split("?code=")[1]
                windowObjectReference.close();
                login(auth_code);
              }
              if (windowObjectReference.closed) {
                clearInterval(sensor);
              }
            }
            var windowObjectReference = null;
            var sensor = null;
            function sign_in_btn() {
              windowObjectReference = window.open(
                "https://auth.aiesec.org/oauth/authorize?response_type=code&client_id=6a1dff3bc3c7fa6e1aea0b3d1e89683cfe1c9bf8517b82b26ecd0f34fa5c45db&redirect_uri=https%3A%2F%2Faiesec.org.eg%2F", "Authorization", "resizable,scrollbars,status"
              );
              sensor = setInterval(check_auth, 1000);
            }	
            //  function show_duration(data) {
            //    var slot_options = document.getElementById("opp_ava")
            //    var slot_id = slot_options.options[slot_options.selectedIndex].value;
            //    var slot_name = slot_name.options[slot_name.selectedIndex]
            //    start = data['data']['getOpportunity'][slot_name]['start_date']
            //    end = data['data']['getOpportunity'][slot_name]['end_date']
            //    document.getElementById('opp_ava').
            //     document.getElementById('opp_duration').innerHTML = "Projects starts from " + start + " to " + end;
              

            //  }
             

            function show_user_data(data){
                document.getElementById('current_user').innerHTML = 'Hello, ' + data['data']['currentuser']['profile']['firstName'] + ', ' + '<a style="color: white;" href="#" onclick="logout();">Logout</a>';
                update_user_apps(data['data']['currentuser']['profile']['expaId']);
                global_person_id = data['data']['currentuser']['profile']['expaId'];
            }
            
            function get_current_user(access_token){
                var query = `query Myquery {
                     currentuser
                      {
                        id
                        profile
                        {
                          firstName
                          expaId
                        }
                      }
                    }`;

                    data_ = fetch(endpoint + '/graphql', {
                      method: 'POST',
                      headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json',
                        'Authorization': 'JWT ' + access_token,
                      },
                      body: JSON.stringify({
                        query,
                      })
                    })
                      .then(r => r.json())
                      .then(data => show_user_data(data));
            }
            function show_login_panel(){
                document.getElementById("hotme").click();
            }
            function show_signup_panel(){
                document.getElementById("sign_me_up").click();
            }
            function validate_application(data){
                update_user_apps(global_person_id);
                // window.location.href = '/thankyou_gv.html';
            }
            function apply_for(opp_id,slot_id){
                var access_token = getCookie('alpha_token');
                console.log
                $("#opp_upper_cover *").attr("disabled", "disabled").off('click');
                //alert(opp_id)

                var slot_options = document.getElementById("opp_ava")
                var slot_id = slot_options.options[slot_options.selectedIndex].value;
                var query = `mutation MyMutation($opp_id:ID!, $slot_id:ID!){
                  signedInApply(oppId:$opp_id, slotId:$slot_id)
                  {
                    application
                    {
                      id
                      expaId
                      slotId
                    }
                  }
                }`;
                    var variables = { opp_id: opp_id,
                    slot_id: slot_id},
                        
                    data_ = fetch(endpoint + '/graphql', {
                      method: 'POST',
                      headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json',
                        'Authorization': 'JWT ' + access_token
                      },
                      body: JSON.stringify({
                        query,
                        variables,
                      })
                    })
                      .then(r => r.json())
                      .then(data => validate_application(data)); 
            }
            function styling(){
                 document.getElementById('apply_button').innerHTML = '<a class="button button-secondary" style="background-color: #F85A40;">Applied</a>';

            }

            function apply(opp_id, country_id){
                var current_token = getCookie('alpha_token');

                // var slot = slot_options.options[slot_options.selectedIndex].value;
                if (current_token == ""){
                    preferred_country = country_id;
                    preferred_opp = opp_id;
                    var slots_options = document.getElementById('opp_ava')
                  var slot_id = slots_options.options[slots_options.selectedIndex].value;
                  console.log(slot_id)
                  if (slot_id.length <= 0) {

                    var msg = "Please choose a start date";
                    document.getElementById('slot_error_msg').innerHTML = msg;
                    document.getElementById('slot_msg').style.display = "block";
                    return false;

                    
                  }
                  else{
                    preferred_slot = slot_id;
                    show_signup_panel();}
                    
                    

                }
                
                else{
                  var slots_options = document.getElementById('opp_ava')
                  var slot_id = slots_options.options[slots_options.selectedIndex].value;
                  console.log(slot_id)

                  if (slot_id.length <= 0) {

                    var msg = "Please choose a start date";
                    document.getElementById('slot_error_msg').innerHTML = msg;
                    document.getElementById('slot_msg').style.display = "block";
                                      console.log(slot_id)

                    return false;
                  }
                  else{ apply_for(opp_id, slot_id);
                  styling();

                        }                    

                   
                }
            }
            function inject_country_opps(data, country_id){
                var opps = data['data']['allOpportunity']['data'];
                opps.forEach(function(element) {
                    var $log = $( "#opps_container" ),
                    str = '<div class="product-box"> <div class="product-header"> <div class="column-row"> <div class="column-33"> <img style="height: 100%; width: 100%; object-fit: cover;" alt="Image" src="'+ element.cover_photo.url+'"> </div> <div class="column-33" style="text-align: left;"> <p style="margin-left: 0px; margin-top: 0px;color: black;"><strong>'+ element.title +'</strong></p> <p style="margin-top: 0px;color: black;">'+ element.location +'  ' + ' </p> <p style="text-align: right; margin-right: 10px;"><a onclick="details_opp(' + "'" +element.id+ "'" +');" class="button offset-md-3">Learn More</a>&nbsp;&nbsp;</p> </div> </div> </div> </div> ',
                    html = $.parseHTML( str ),
                    nodeNames = [];
                    $log.append( html );
                    
                    if(opps_list.includes(element.id.toString())){
                        var disable_apply_btn = document.getElementById("opp_btn_"+element['node'].id);
                        disable_apply_btn.innerHTML = "Applied";
                        disable_apply_btn.setAttribute('onclick','');
                        disable_apply_btn.style.backgroundColor = 'grey';
                    }
                });
            }
            function load_country_opps(country_id){
                var query = `query MyQuery($page: Int!, $country: Int!){
                  allOpportunity(page:$page, filters:{committee:$country,programmes:7})
                  {
                    data
                    {
                      id
                      title
                      earliest_start_date
                      duration
                      location
                      organisation
                      {
                        name
                      }
                      cover_photo
                    }
                  }
                }`;
                
                var variables = { country: country_id, page:page_index},

                data_ = fetch('https://gis-api.aiesec.org/graphql?access_token=e316ebe109dd84ed16734e5161a2d236d0a7e6daf499941f7c110078e3c75493', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                  },
                  body: JSON.stringify({
                    query,
                    variables
                  })
                })
                  .then(r => r.json())
                  .then(data => inject_country_opps(data, country_id));
                //console.log(data_);
            }
            
            function show_country_panel(data){
                //Load country info here and then fill the modal with data and then load the Opps
                //console.log(data['data']['getCountry']['expaId'])
                document.getElementById("country_name").innerHTML = data['data']['getCountry']['name'];
                //.getElementById("additional_costs").innerHTML = data['data']['getCountry']['overAllCost'];
                document.getElementById("flight_costs").innerHTML = data['data']['getCountry']['flightTickets'];
                document.getElementById("basic_costs").innerHTML = data['data']['getCountry']['overAllCost'];
                document.getElementById("visa_costs").innerHTML = data['data']['getCountry']['gvVisaFees'];
                document.getElementById("country_poster").setAttribute("src", "img/logos/country_posters/"+data['data']['getCountry']['poster'])
                document.getElementById("country_flag").setAttribute("src", "img/logos/flags/"+data['data']['getCountry']['flag'])
                preferred_country_id = data['data']['getCountry']['id'];
                document.getElementById("country_link").click();
                document.getElementById('opp_model_msg').style.display = 'none';
                page_index = 1;
                document.getElementById("opps_container").innerHTML = "";
                load_country_opps(data['data']['getCountry']['expaId']);
            }
            function show_opp_details_panel(){
                document.getElementById('opp_details_link').click();
            }
            function load_country_info(country_id){
                var query = `query Myquery($id: ID!) {
                  getCountry(id:$id)
                  {
                        id
                        name
                        expaId
                        poster
                        visaLink
                        gvVisaFees
                        overAllCost
                        flightTickets
                        flag
                  }
                }`;
                var variables = { id : country_id},

                data_ = fetch(endpoint+'/graphql', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                  },
                  body: JSON.stringify({
                    query,
                    variables,
                  })
                })
                  .then(r => r.json())
                  .then(data => show_country_panel(data));
            }
            
            function inject_countries(data){
                //var current_token = getCookie('alpha_token');
                var countries = data['data']['allCountries']['edges'];
                countries.forEach(function(element) {
                    var $log = $( "#countries_map" ),
                    str = '<li style="top: '+ element['node'].xCoordinate +'%; left: ' + element['node'].yCoordinate + '%;"> <a onclick="load_country_info(' + "'" +element['node'].id+ "'" + ');"><span class="label-top-left">' + element['node'].name + '</span></a> </li> ',
                    html = $.parseHTML( str ),
                    nodeNames = [];
                    $log.append( html );
                    
                    var $log = $( "#countries_list" ),
                    str = '<li><a onclick="load_country_info(' + "'" +element['node'].id+ "'" + ');">'+ element['node'].name +'</a></li>',
                    html = $.parseHTML( str ),
                    nodeNames = [];
                    $log.append( html );
                    //document.getElementById('country_title_'+ element['node'].expaId).setAttribute('onclick', 'show_panel("country_space_'+ element['node'].expaId+ '")');
                    
                });
            }
            function fetch_countries(){
                var query = `query Myquery {
                 allCountries(orderBy:"listing",isGv:true)
                      {
                        edges
                        {
                          node
                          {
                            id
                            name
                            expaId
                            flag
                            visaLink
                            gvVisaFees
                            flightTickets
                            overAllCost
                            xCoordinate
                            yCoordinate
                          }
                        }
                      }
                }`;

                data_ = fetch(endpoint+'/graphql', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                  },
                  body: JSON.stringify({
                    query,
                  })
                })
                  .then(r => r.json())
                  .then(data => inject_countries(data));
                //console.log(data_);
            }
            
            function inject_user_apps(data){
                //var current_token = getCookie('alpha_token');
                opps_list = [];
                var apps = data['data']['allOpportunityApplication']['data'];
                apps.forEach(function(element) {
                    opps_list.push(element['opportunity']['id'])
                });
            }
            function update_user_apps(person_id){
                var query = `query Myquery($id: Int!) {
                  allOpportunityApplication(filters:{person_id:$id})
                  {
                    data
                    {
                      opportunity{id}
                    }
                  }
                }`;
                var variables = { id : person_id},

                data_ = fetch('https://gis-api.aiesec.org/graphql?access_token=67803c4f6086283ff8728ba6da9ada440251ac588a0d05de32ffc2b03eb93d99', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                  },
                  body: JSON.stringify({
                    query,
                    variables,
                  })
                })
                  .then(r => r.json())
                  .then(data => inject_user_apps(data));
            }
            
            
            function validate_signup(data){
                //console.log(data)
                $('#ge_signup_form *').prop("disabled", false);
                token = data['data']['ogxSignup']['token']
                setCookie("alpha_token", token, 1);
                document.getElementById('current_user').innerHTML = 'Hello, ' + data['data']['ogxSignup']['applicant']['firstName'] + ', ' + '<a href="#" onclick="logout();">Logout</a>';
                window.location.href = '/thankyou.html';
                document.getElementById('coldme').click();
                document.getElementById('country_link').click();
                document.getElementById('opp_model_msg').innerHTML = "Succesfully Applied!";
                document.getElementById('opp_model_msg').style.display = 'block';
                opps_list.push(preferred_opp);
                load_country_opps(preferred_country_id);
                //document.getElementById('gv_signup_modal').setAttribute('class', 'modal-container')
                //$('#trigger_btn').click();
                
                // Show the user that he Applied! Congrats!
            }
            function signup_request(){
                var campus_options = document.getElementById('campus_options')
                var campus = campus_options.options[campus_options.selectedIndex].value;
                
                var faculty_options = document.getElementById('faculty_options')
                var faculty = faculty_options.options[faculty_options.selectedIndex].value;
                
                var referral_options = document.getElementById('referral_options')
                var referral = referral_options.options[referral_options.selectedIndex].value;
                
                var gender_options = document.getElementById('gender_options')
                var gender = gender_options.options[gender_options.selectedIndex].value;
                
                var reason_to_apply_options = document.getElementById('apply_reasons_options')
                var reason_to_apply = reason_to_apply_options.options[reason_to_apply_options.selectedIndex].value;
                
                var reason_to_prevent_options = document.getElementById('prevent_reasons_options')
                var reason_to_prevent = reason_to_prevent_options.options[reason_to_prevent_options.selectedIndex].value;
                var slot_options = document.getElementById("opp_ava")
                var slot_id = slot_options.options[slot_options.selectedIndex].value;
                
                var query = `mutation MyMutation($firstname: String!, $lastname: String!, $email: String!, $password: String!, $phone: String!, $campus: ID!, $faculty: ID!, $referral: ID!,$dob: Date!, $ogxBranch: Int!, $graduationYear: Int!, $gender: String!,$apply_reason: String!, $prevent_resaon: String!, $opp_id: Int!, $slot_id: Int!, $countryId: Int!){
    ogxSignup(firstName:$firstname,lastName:$lastname,email:$email,password:$password,phone:$phone,campus:$campus,faculty:$faculty,referral:$referral,dob:$dob, ogxBranch:$ogxBranch,graduationYear:$graduationYear,  gender:$gender,reasonToApply:$apply_reason, reasonToPrevent:$prevent_resaon, oppId:$opp_id, slotId:$slot_id, countryId:$countryId)
                  {
                    token
                    applicant
                    {
                      firstName
                      expaId
                      dob
                      committee
                      {
                        id
                        name
                        expaId
                      }
                      university
                      {
                        name
                      }
                      faculty
                      {name}
                      referral
                      {
                        name
                      }

                    }
                  }
                }`;
                    var variables = { firstname: document.getElementById('first_name_field').value,
                                      lastname: document.getElementById('last_name_field').value,
                                      email: document.getElementById('email_signup_field').value,
                                      password: document.getElementById('password_signup_field').value,
                                      phone: document.getElementById('phone_field').value,
                                      campus: campus,
                                      faculty: faculty,
                                      referral: referral,
                                      dob: document.getElementById('dob_field').value,
                                      ogxBranch: 7,
                                      graduationYear: document.getElementById('graduation_year_field').value,
                                      gender: gender,
                                      countryId: preferred_country,
                                      opp_id: preferred_opp,
                                      slot_id: slot_id,
                                      apply_reason:reason_to_apply,
                                      prevent_resaon:reason_to_prevent,
                                    },
                        

                    data_ = fetch(endpoint + '/graphql', {
                      method: 'POST',
                      headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json',
                      },
                      body: JSON.stringify({
                        query,
                        variables,
                      })
                    })
                      .then(r => r.json())
                      .then(data => validate_signup(data));
            }
            function validate_email(data){
                //console.log(data)
                result = data['data']['isEmailUnique']['unique']
                if (result == true){
                    //document.getElementById('signup_prog').innerHTML = '<div class="progress-horizontal__progress" style="width: 40%;"></div>';
                    //document.getElementById('prog_label').innerHTML = 'Creating Account';
                    //document.getElementById('div_prog').style.display = 'block';
                    signup_request()
                    //alert('SIGNING YOUR ASS UP!')
                }
                else{
                    var msg = "The email is registered before, please sign in.";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    //$("#ge_signup_form *").attr("disabled", "").off('click');
                    $('#ge_signup_form *').prop("disabled", false);
                }
            }
            
            function unique_email(email){
                //document.getElementById('ge_signup_form').style.display = 'none';
                $("#ge_signup_form *").attr("disabled", "disabled").off('click');
                var query = `mutation mymutation($email: String!){
                  isEmailUnique(email:$email){
                    unique
                  }
                }`;
                    var variables = { email: email},
                        

                    data_ = fetch(endpoint + '/graphql', {
                      method: 'POST',
                      headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json',
                      },
                      body: JSON.stringify({
                        query,
                        variables,
                      })
                    })
                      .then(r => r.json())
                      .then(data => validate_email(data));
                
            }
            function isNumeric(n) {
              return !isNaN(parseFloat(n)) && isFinite(n);
            }
            function validate_form(){
                // Validate form inputs here first before calling !
                document.getElementById('form_msg').style.display = "none";
                var upperCase= new RegExp('[A-Z]');
                var lowerCase= new RegExp('[a-z]');
                var numbers = new RegExp('[0-9]');
                var firstname = document.getElementById('first_name_field').value;
                var lastname = document.getElementById('last_name_field').value;
                var email = document.getElementById('email_signup_field').value;
                var password = document.getElementById('password_signup_field').value;
                var phone = document.getElementById('phone_field').value;         
                var dob = document.getElementById('dob_field').value;
                var graduation_year = document.getElementById('graduation_year_field').value;
                var campus_options = document.getElementById('campus_options')
                var campus = campus_options.options[campus_options.selectedIndex].value;
                
                var faculty_options = document.getElementById('faculty_options')
                var faculty = faculty_options.options[faculty_options.selectedIndex].value;
                
                var referral_options = document.getElementById('referral_options')
                var referral = referral_options.options[referral_options.selectedIndex].value;
                
                var gender_options = document.getElementById('gender_options')
                var gender = gender_options.options[gender_options.selectedIndex].value;
                if (firstname.length <= 0) {
                    var msg = "Please Enter Your First Name";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return false;
                 }
                if (lastname.length <= 0) {
                   var msg = "Please Enter Your Last Name";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return false;
                 }
                if (email.length < 4) {
                   var msg = "Please Enter a valid email.";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return false;
                 }
                if (email.includes(' ')){
                    var msg = "Please Remove Spaces from your email!";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return false;
                }
                if (!email.includes('@') || !email.includes('.')){
                    var msg = "Please enter a valid email!";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return false;
                }
                if (password.length <= 8) {
                   var msg = "Your password must be more than 8 characters";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return false;
                 }
                
                var numeric = false;
                var upperCase = false;
                var lowerCase = false;
                var i=0;
                var character='';
                var specials = ['"', '!', '"', '#', '$', '%', '&', '(', ')', '*', '+', ',', '-', '.', '/', ':', ';', '<', '=', '>', '?', '@', '[', "'\'", ']', '^', '_', '`', '{', '|', '}', '~' , '"']
                while (i < password.length){
                    character = password.charAt(i);
                    if (character != ' '){
                        if (isNumeric(character)){
                        numeric = true;
                        }
                        else{
                            if (!specials.includes(character)){
                                if (character == character.toUpperCase()) {
                                    upperCase = true;
                                }
                                if (character == character.toLowerCase()){
                                    lowerCase = true;
                                }
                            }
                        }
                    }
                    
                    i++;
                }
                if ( !numeric || !upperCase || !lowerCase ){
                    var msg = "Your password must contain a mixture of upper and lower case letters and at least one number";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return false; 
                }
                if (phone.length != 11) {
                    var msg = "Please enter a valid 11 digits phone number.";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return false;
                 }
                if (dob.length <= 6) {
                    var msg = "Please enter a valid date of birth.";
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return false;
                 }
                if (calculate_age(new Date(document.getElementById('dob_field').value)) > 30 || calculate_age(new Date(document.getElementById('dob_field').value)) < 18 ){
                    var msg = "You need to be between the age of 18 and 30 to apply."
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return false;
                }
                if (graduation_year.length != 4) {
                    var msg = "Please enter a valid graduation year."
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return false;
                 }
                if (campus == ""){
                    var msg = "Please choose your University"
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return false;
                }
                if (faculty == ""){
                    var msg = "Please choose your Faculty"
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return false;
                }
                if (gender == ""){
                    var msg = "Please choose your Gender"
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return false;
                }
                if (referral == ""){
                    var msg = "Please choose your Referral"
                    document.getElementById('sign_up_error_msg').innerHTML = msg;
                    document.getElementById('form_msg').style.display = "block";
                    return false;
                }
                unique_email(email);
                
            }
            
            function inject_campuses(data){
                var campuses = data['data']['allCampuses']['edges'];
                campuses.forEach(function(element) {
                    var $log = $( "#campus_options" ),
                    str = '<option value="' + element['node'].id + '">' + element['node'].name + '</option>',
                    html = $.parseHTML( str ),
                    nodeNames = [];
                    $log.append( html );
                });
            }
            function inject_faculties(data){
                var faculties = data['data']['allFaculties']['edges'];
                faculties.forEach(function(element) {
                    var $log = $( "#faculty_options" ),
                    str = '<option value="' + element['node'].id + '">' + element['node'].name + '</option>',
                    html = $.parseHTML( str ),
                    nodeNames = [];
                    $log.append( html );
                });
            }
            function inject_referrals(data){
                var referrals = data['data']['allReferrals']['edges'];
                referrals.forEach(function(element) {
                    var $log = $( "#referral_options" ),
                    str = '<option value="' + element['node'].id + '">' + element['node'].formValue + '</option>',
                    html = $.parseHTML( str ),
                    nodeNames = [];
                    $log.append( html );
                });
            }
            function fetch_referrals(){
                var query = `query Myquery {
                 allReferrals
                  {
                    edges
                    {
                      node
                      {
                        id
                        formValue
                      }
                    }
                  }
                }`;

                data_ = fetch(endpoint + '/graphql', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                  },
                  body: JSON.stringify({
                    query,
                  })
                })
                  .then(r => r.json())
                  .then(data => inject_referrals(data));
                //console.log(data_);
            }
            function fetch_campuses(){
                var query = `query Myquery {
                 allCampuses
                  {
                    edges
                    {
                      node
                      {
                        id
                        name
                        alignmentId
                      }
                    }
                  }
                }`;

                data_ = fetch(endpoint + '/graphql', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                  },
                  body: JSON.stringify({
                    query,
                  })
                })
                  .then(r => r.json())
                  .then(data => inject_campuses(data));
                //console.log(data_);
            }
            function fetch_faculties(){
                var query = `query Myquery {
                 allFaculties
                  {
                    edges
                    {
                      node
                      {
                        id
                        name
                      }
                    }
                  }
                }`;

                data_ = fetch(endpoint + '/graphql', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                  },
                  body: JSON.stringify({
                    query,
                  })
                })
                  .then(r => r.json())
                  .then(data => inject_faculties(data));
                //console.log(data_);
            }
            
            function prettify_booleans(input){
                if (input == true)
                    return "Yes"
                else
                    return "No"
            }
            function show_opp(data){  

              
              
                // Show Overview Tab
                console.log(data);
                preferred_country = data['data']['getOpportunity']['host_lc']['parent']['id'];
                preferred_opp = data['data']['getOpportunity']['id'];
                document.getElementById('back_btn').setAttribute('onclick', 'load_country_info("'+preferred_country_id+'")');
                var current_token = getCookie('alpha_token');
                if (current_token == ""){
                    document.getElementById('apply_button').innerHTML = '<a onclick="apply(' + "'" + preferred_opp + "'," + "'" + preferred_country + "'" +');" class="button button-secondary" style="text-align: center;">Apply</a>';
                }
                else{
                    if(opps_list.includes(preferred_opp.toString())){
                        document.getElementById('apply_button').innerHTML = '<a class="button button-secondary" style="background-color: #F85A40;">Applied</a>';
                    }
                    else{
                        document.getElementById('apply_button').innerHTML = '<a onclick="apply(' + "'" +preferred_opp+ "'," + "'" +preferred_country+ "'" +');" class="button button-secondary">Apply</a>';
                    }
                }
                document.getElementById('opp_title').innerHTML = data['data']['getOpportunity']['title'];
                document.getElementById('opp_location').innerHTML = data['data']['getOpportunity']['location'];
                document.getElementById('opp_title_details').innerHTML = data['data']['getOpportunity']['title'];

                // document.getElementById('opp_duration').innerHTML = data['data']['getOpportunity']['duration'] ;
                document.getElementById('opp_tnfees').innerHTML = data['data']['getOpportunity']['project_fee']['fee'] +data['data']  ['getOpportunity']['project_fee']['currency'] ;
               var slots = data['data']['getOpportunity']['available_slots'];
              slots.forEach(function (element) {
                console.log(element)
                var $log = $("#opp_ava"),
                  str = '<option value="' + element['id'] + '">' +"I will travel at: "+ element['start_date'] + '</option>',
                  html = $.parseHTML(str),
                  nodeNames = [];

                $log.append(html);
                
                 
                  

              });
              //  var slots_options = document.getElementById('opp_ava')
              document.getElementById("opp_ava").addEventListener("click", myFunction);
              function myFunction() {
                    //  var slots_options = document.getElementById('opp_ava')
                    var  indd = document.getElementById('opp_ava').selectedIndex;
                // indd = indexOf(slots_options.options[slots_options.selectedIndex])
                console.log(indd-1)
                // var ind = parseInt(indd, 10);
               document.getElementById('opp_duration').innerHTML = "Projects starts from " + data['data']['getOpportunity']['available_slots'][indd-1]['start_date'] + " to " + data['data']['getOpportunity']['available_slots'][indd-1]['end_date'];;
              }
              //  var sel = document.getElementById("opp_ava").selectedIndex;
                // setInterval(sel, 1000)
              // document.getElementById('opp_ava').('onclick', 'setInterval(sel, 1000);')
              

              //  console.log(sel)
              // var slot_id = slots_options.options[slots_options.selectedIndex].value;
              // console.log(slots_options)
              // document.getElementById('opp_duration').innerHTML = "Projects starts from " + data['data']['getOpportunity']['available_slots'][sel]['start_date'] + " to " + data['data']['getOpportunity']['available_slots'][sel]['end_date']; 
              

                document.getElementById('opp_main_cover').setAttribute('style', 'background: url(" ' + data['data']['getOpportunity']['cover_photo'] +  ' "); opacity: 1;' );
                // Role Tab
                document.getElementById('role_descr').innerHTML = data['data']['getOpportunity']['description'];
                document.getElementById('main_activities').innerHTML = ""
                var activities = data['data']['getOpportunity']['role_info']['learning_points_list'];
                activities.forEach(function(element) {
                    document.getElementById('main_activities').innerHTML += '<li>' + element + '</li>';
                });
                
                // Prerequisites Tab
                document.getElementById('opp_backgrounds').innerHTML = "";
                document.getElementById('opp_skills').innerHTML = "";
                document.getElementById('opp_citizenships').innerHTML = "";
                document.getElementById('opp_languages').innerHTML = "";
                document.getElementById('opp_study_levels').innerHTML = "";
                
                var backgrounds = data['data']['getOpportunity']['backgrounds'];
                backgrounds.forEach(function(element) {
                    document.getElementById('opp_backgrounds').innerHTML += element.constant_name + ', '
                });
                
                var skills = data['data']['getOpportunity']['skills'];
                skills.forEach(function(element) {
                    document.getElementById('opp_skills').innerHTML += element.constant_name + ', '
                });
                
                var citizenships = data['data']['getOpportunity']['nationalities'];
                citizenships.forEach(function(element) {
                    document.getElementById('opp_citizenships').innerHTML += element.constant_name + ', '
                });
                
                var languages = data['data']['getOpportunity']['languages'];
                languages.forEach(function(element) {
                    document.getElementById('opp_languages').innerHTML += element.constant_name + ', '
                });
                
                var studylevels = data['data']['getOpportunity']['study_levels'];
                studylevels.forEach(function(element) {
                    document.getElementById('opp_study_levels').innerHTML += element.name + ', '
                });
                
                
                // Logistics Tab
                document.getElementById('opp_working_hours').innerHTML = 'From ' + data['data']['getOpportunity']['work_hours'][0]['from'] + ' To ' + data['data']['getOpportunity']['work_hours'][0]['to'];
                
                document.getElementById('opp_computer_provided').innerHTML = prettify_booleans(data['data']['getOpportunity']['specifics_info']['computer']);
                
                document.getElementById('opp_accom_provided').innerHTML = prettify_booleans(data['data']['getOpportunity']['logistics_info']['accommodation_provided']);
                
                document.getElementById('opp_accom_covered').innerHTML = prettify_booleans(data['data']['getOpportunity']['logistics_info']['accommodation_covered']);
                
                document.getElementById('opp_food_covered').innerHTML = prettify_booleans(data['data']['getOpportunity']['logistics_info']['food_covered']);
                
                // Visa Tab
                document.getElementById('opp_visa_type').innerHTML = data['data']['getOpportunity']['home_mc']['visa_requirements']['GV']['visa_type'];
                document.getElementById('opp_visa_link').innerHTML = data['data']['getOpportunity']['home_mc']['visa_requirements']['GV']['visa_link'];
                document.getElementById('opp_health_insurance').innerHTML = data['data']['getOpportunity']['home_mc']['visa_requirements']['GV']['health_insurance_link'];
                
                
                
                // Show the Modal
                show_opp_details_panel();
                console.log("panel");
            }
            function details_opp(opp_id){
                var query = `query MyQuery($id: ID){
                  getOpportunity(id:$id)
                  { 
                    work_hours
                    available_slots{
            applications_close_date
            start_date
            end_date
            id
             
            }  

                    id
                    cover_photo
                    programme{short_name_display}
                    title
                    location
                   
                    home_mc{
              visa_requirements
            }
                    description
                    role_info{learning_points_list}
                    sdg_info{sdg_target{
                        parent{short_name}
                        description
                        goal_index
                      }
                    }
                    specifics_info{
                      expected_work_schedule
                      computer
                    }
                    logistics_info{
                      accommodation_provided
                      accommodation_covered
                      food_covered
                    }
                    backgrounds{constant_name}
                    skills{constant_name}
                    nationalities{constant_name}
                    languages{constant_name}
                    study_levels{name}
                    
                    host_lc{
                      name
                      parent{id}
                    }
                    project_fee

                  }
                }`;
                
                var variables = { id: opp_id },

                data_ = fetch('https://gis-api.aiesec.org/graphql?access_token=67803c4f6086283ff8728ba6da9ada440251ac588a0d05de32ffc2b03eb93d99', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                  },
                  body: JSON.stringify({
                    query,
                    variables,
                  })
                })
                  .then(r => r.json())
                  .then(data => show_opp(data));
                //console.log(opp_id);
                /*var current_token = getCookie('alpha_token');
                if (current_token == "")
                {
                    document.getElementById('apply_btn').setAttribute('onclick', 'show_signup_panel();')
                        
                }
                else
                {
                    document.getElementById('apply_btn').setAttribute('onclick', 'apply_for("'+ opp_id+ '");')
                }*/
                
            }
            function calculate_age(dob) { 
                var diff_ms = Date.now() - dob.getTime();
                var age_dt = new Date(diff_ms); 

                return Math.abs(age_dt.getUTCFullYear() - 1970);
            }
            // function inject_slots(data) {
                
            function main(){

                var current_token = getCookie('alpha_token');
                    if (current_token == "")
                    {
                        //console.log('Adding Sign in Button');
                        var $log = $( "#current_user"),
                        str = '<button class="button-secondary" onclick="sign_in_btn();"> <i class="fas fa-lock icon-left"></i>Login </button> ',
                        html = $.parseHTML( str ),
                        nodeNames = [];
                        $log.append( html );
                        
                        
                    }
                    else
                    {
                        get_current_user(current_token)
                    }
                fetch_countries();
                fetch_referrals();
                fetch_faculties();
                fetch_campuses();
            }
            
            window.onload = main;
        
        </script>
	</body>
</html>